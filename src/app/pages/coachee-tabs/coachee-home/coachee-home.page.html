<ion-header>
  <ion-toolbar color="primary" slot='start'>
    <ion-title class='ion-text-start ion-no-padding'>
    UP COACH
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content >
  <div class="content-container">
    <ion-fab vertical="top" horizontal="end" slot="fixed">
      <ion-fab-button (click)="goto_chat()" #cart>
        <div *ngIf='unReadMessageNumber>0' class="volume-high-length">{{ unReadMessageNumber}}</div>
        <ion-icon name="volume-high" class="volume-high-icon"></ion-icon>
      </ion-fab-button>
    </ion-fab>
    <!-- habit list  -->
    <ion-item-group>
      <ion-item lines='none' class='ion-margin'>
        <ion-avatar style='display: inline-block'>
          <img [src]="coachProfile">
        </ion-avatar>
        <ion-label>
          Your Coach<br>
          <small>
            {{currentUser?._coach.firstName}} {{currentUser?._coach.lastName}}
          </small>
        </ion-label>
        <ion-button slot='end' fill='outline' shape="round" size="default" color='primary' (click)="goto_chat()">
          Chat
        </ion-button>
      </ion-item>
      <ion-item lines='none' class='ion-margin-horizontal'>
        <circle-progress [percent]=completedHabitPercent>
        </circle-progress>
        <ion-button slot='end' size="default" fill='outline' shape="round"
          [routerLink]="['/coachee/coachee-home/habitlist']" routerDirection="forward">
          Log my habits
        </ion-button>
      </ion-item>
    </ion-item-group>
    <!-- challenges -->
    <ion-item-group>
      <ion-item-divider color="secondary">
        <h5>
          MY DAILY CHALLENGES
        </h5>
      </ion-item-divider>
      <div *ngIf="activeChallenges.length>0" class='ion-margin'>
        <ion-item *ngFor='let activeChallenge of activeChallenges' detail lines='none' class='ion-text-wrap'
          (click)="goto_challenge_detail(activeChallenge._id)">
          <ion-thumbnail slot="start">
            <img [src]='activeChallenge.categoryImage'>
          </ion-thumbnail>
          <ion-label slot='end'>{{activeChallenge.categoryName}}</ion-label>
        </ion-item>
      </div>
      <div *ngIf="!activeChallenges.length>0">
        <ion-card [routerLink]="['/coachee/challenges']">
          <ion-card-content>
            <ion-label class='ion-text-center'>
              <ion-icon name="add-circle-outline"></ion-icon>
            </ion-label>
          </ion-card-content>
        </ion-card>
      </div>

    </ion-item-group>
    <!-- healthy tips -->
    <ion-item-group>
      <ion-item-divider color="secondary">
        <h5>
          UP TIPS
        </h5>
      </ion-item-divider>
      <div *ngIf="healthyTips.length">
        <ion-card *ngFor="let tip of healthyTips">
          <img [src]="tip.image">
          <ion-card-header>
            <ion-card-title class='ion-text-capitalize' color='primary'>
              {{tip?.title}}
            </ion-card-title>
          </ion-card-header>
          <ion-card-content class="ion-text-wrap">
            {{tip?.description}}
          </ion-card-content>
          <ion-button fill='clear' size='small' (click)=" goto_healthy_tip(tip.url)" class="ion-text-uppercase">
            Read more
          </ion-button>
        </ion-card>
      </div>
    </ion-item-group>
    <ion-infinite-scroll threshold="40px" (ionInfinite)="load_more_healthyTips($event)">
      <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </div>

</ion-content>